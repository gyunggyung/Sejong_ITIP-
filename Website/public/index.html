<html>
<head>
    <title>실내로</title>
    <meta charset="utf-8" />
    <script type="text/javascript" src="js/jquery-1.12.4.min.js"></script>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="loading.css">
    <style type="text/css">
        html {
            min-width: 800px;
        }

        #full-slider-wrapper {
            overflow: hidden;
        }

        #full-slider {
            position: relative;
            width: 40%;
            height: 70%;
            margin-left: 100;
            margin: 0 auto;
        }
        
        .hidden {
            visibility: hidden;
        }

        #full-slider .slide-panel {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 99%;
            visibility: hidden;
        }

        #full-slider .slide-panel.active1{
            visibility: visible;
        }

        #full-slider-nav {
            position: absolute;
            top: 0;
            right: 0;
        }

        #full-slider-nav-left, #full-slider-nav-right {
            display: inline-block;
            height: 0;
            width: 0;
            margin-left: 15px;
            border: 20px solid transparent;
            cursor: pointer;
        }

        #full-slider-nav-left {
            border-right-color: #BBB;
        }

        #full-slider-nav-left:hover {
            border-right-color: #999;
        }

        #full-slider-nav-right {
            border-left-color: #BBB;
        }

        #full-slider-nav-right:hover {
            border-left-color: #999;
        }

        #full-slider .slide-panel {
            background-color: rgba(0,0,0,0.8);
            color: #DDD;
        }

        input[id="eatingfood"] + label {
            display: inline-block;
            background-color: rgba(0,0,0,0.8);
            width: 20%;
            height: 23%;
            border: 4px solid #bcbcbc;
            cursor:pointer;
            font-size: 40;
            color : white;
        }

        input[id="eatingfood"]:checked + label {
            background-color: rgba(0,0,255,0.6);
        }

        input[id="eatingfood"] {
            display: none;
        }

        input[id="drinking"] + label {
            display: inline-block;
            background-color: rgba(0,0,0,0.8);
            width: 20%;
            height: 23%;
            border: 4px solid #bcbcbc;
            cursor: pointer;
            font-size: 40;
            color : white;
        }

        input[id="drinking"]:checked + label {
            background-color: rgba(0,0,255,0.6);
        }

        input[id="drinking"] {
            display: none;
        }

        input[id="meaningfulplace"] + label {
            display: inline-block;
            background-color: rgba(0,0,0,0.8);
            width: 20%;
            height: 23%;
            border: 4px solid #bcbcbc;
            cursor: pointer;
            font-size: 40;
            color : white;
        }

        input[id="meaningfulplace"]:checked + label {
            background-color: rgba(0,0,255,0.6);
        }

        input[id="meaningfulplace"] {
            display: none;
        }

        input[id="outdoors"] + label {
            display: inline-block;
            background-color: rgba(0,0,0,0.8);
            width: 20%;
            height: 23%;
            border: 4px solid #bcbcbc;
            cursor: pointer;
            font-size: 40;
            color : white;
        }

        input[id="outdoors"]:checked + label {
            background-color: rgba(0, 0, 255, 0.6);
        }

        input[id="outdoors"] {
            display: none;
        }

        input[id="seeandhear"] + label {
            display: inline-block;
            background-color: rgba(0, 0, 0, 0.8);
            width: 20%;
            height: 23%;
            border: 4px solid #bcbcbc;
            cursor: pointer;
            font-size: 40;
            color: white;
        }

        input[id="seeandhear"]:checked + label {
            background-color: rgba(0, 0, 255, 0.6);
        }

        input[id="seeandhear"] {
            display: none;
        }

        input[id="watch"] + label {
            display: inline-block;
            background-color: rgba(0, 0, 0, 0.8);
            width: 20%;
            height: 23%;
            border: 4px solid #bcbcbc;
            cursor: pointer;
            font-size: 40;
            color: white;
        }

        input[id="watch"]:checked + label {
            background-color: rgba(0, 0, 255, 0.6);
        }

        input[id="watch"] {
            display: none;
        }

        input[id="karaoke"] + label {
            display: inline-block;
            background-color: rgba(0, 0, 0, 0.8);
            width: 20%;
            height: 23%;
            border: 4px solid #bcbcbc;
            cursor: pointer;
            font-size: 40;
            color: white;
        }

        input[id="karaoke"]:checked + label {
            background-color: rgba(0, 0, 255, 0.6);
        }

        input[id="karaoke"] {
            display: none;
        }

        input[id="amusementpark"] + label {
            display: inline-block;
            background-color: rgba(0, 0, 0, 0.8);
            width: 20%;
            height: 23%;
            border: 4px solid #bcbcbc;
            cursor: pointer;
            font-size: 40;
            color: white;
        }

        input[id="amusementpark"]:checked + label {
            background-color: rgba(0, 0, 255, 0.6);
        }

        input[id="amusementpark"] {
            display: none;
        }

        input[id="shopping"] + label {
            display: inline-block;
            background-color: rgba(0,0,0,0.8);
            width: 20%;
            height: 23%;
            border: 4px solid #bcbcbc;
            cursor: pointer;
            font-size: 40;
            color : white;
        }

        input[id="shopping"]:checked + label {
            background-color: rgba(0,0,255,0.6);
        }

        input[id="shopping"] {
            display: none;
        }

        input[id="exercise"] + label {
            display: inline-block;
            background-color: rgba(0,0,0,0.8);
            width: 20%;
            height: 23%;
            border: 4px solid #bcbcbc;
            cursor: pointer;
            font-size: 40;
            color : white;
        }

        input[id="exercise"]:checked + label {
            background-color: rgba(0,0,255,0.6);
        }

        input[id="exercise"] {
            display: none;
        }

    </style>
    <style>
          /* 평가 & 리뷰 박스 중 별점 style */
          .star-input > .input,
          .star-input > .input > label:hover,
          .star-input > .input > input:focus + label,
          .star-input > .input > input:checked + label {
              display: inline-block;
              vertical-align: middle;
              background: url('images/grade_img.png')no-repeat;
          }

          .star-input {
              display: inline-block;
              white-space: nowrap;
              width: 225px;
              height: 40px;
              padding: 25px;
              line-height: 30px;
          }

          .star-input > .input {
              display: inline-block;
              width: 150px;
              background-size: 150px;
              height: 28px;
              white-space: nowrap;
              overflow: hidden;
              position: relative;
          }

          .star-input > .input > input {
              position: absolute;
              width: 1px;
              height: 1px;
              opacity: 0;
          }

          .star-input > .input:focus {
              outline: 1px dotted #ddd;
          }

          .star-input > .input > label {
              width: 100px;
              height: 0;
              padding: 28px 0 0 0;
              overflow: hidden;
              float: left;
              cursor: pointer;
              position: absolute;
              top: 0;
              left: 0;
          }

          .star-input > .input > label:hover,
          .star-input > .input > input:focus + label,
          .star-input > .input > input:checked + label {
              background-size: 150px;
              background-position: 0 bottom;
          }

          .star-input > .input > label:hover ~ label {
              background-image: none;
          }

          .star-input > .input > label[for="p1"] {
              width: 30px;
              z-index: 5;
          }

          .star-input > .input > label[for="p2"] {
              width: 60px;
              z-index: 4;
          }

          .star-input > .input > label[for="p3"] {
              width: 90px;
              z-index: 3;
          }

          .star-input > .input > label[for="p4"] {
              width: 120px;
              z-index: 2;
          }

          .star-input > .input > label[for="p5"] {
              width: 150px;
              z-index: 1;
          }

          .star-input > output {
              display: inline-block;
              width: 60px;
              font-size: 18px;
              text-align: right;
              vertical-align: middle;
          }
    </style>
    <style>
        /* 평가 & 리뷰 박스 style */
        .boxing {
            background-color: #ffffff;
            background-color: rgba( 0, 0, 0, 0.6 );
            position: relative;
            width: 57%;
            height: 60%;
            margin: 0 auto;
            padding: 10px;
            margin-top: 5%;
        }
    </style>
</head>
<body>
    <div class="content" id="content1">
        <button class="goto" target="2" id="search">검색하기</button>
        <center>
            <input type="checkbox" name="search" id="eatingfood" value="EatingFood">
            <label for="eatingfood"><center>식사</center> </label>

            <input type="checkbox" name="search" id="drinking" value="Drinking">
            <label for="drinking"><center>카페&주점</center> </label>

            <input type="checkbox" name="search" id="meaningfulplace" value="MeaningfulPlace">
            <label for="meaningfulplace"><center>명소</center> </label>

            <br>

            <input type="checkbox" name="search" id="outdoors" value="Outdoors">
            <label for="outdoors"><center>야외</center> </label>

            <input type="checkbox" name="search" id="seeandhear" value="SeeAndHear">
            <label for="seeandhear"><center>극장</center> </label>

            <input type="checkbox" name="search" id="watch" value="Watch">
            <label for="watch"><center>전시</center> </label>

            <br>

            <input type="checkbox" name="search" id="karaoke" value="Karaoke">
            <label for="karaoke"><center>노래방</center> </label>

            <input type="checkbox" name="search" id="amusementpark" value="Amusementpark">
            <label for="amusementpark"><center>놀이공원</center> </label>

            <input type="checkbox" name="search" id="shopping" value="Shopping">
            <label for="shopping"><center>쇼핑</center> </label>

            <input type="checkbox" name="search" id="exercise" value="Exercise">
            <label for="exercise"><center>운동</center> </label>

            <br>
        </center>
    </div>

    <div class="content" id="content2">
        <button class="goto" target="1">처음으로</button>
        <div id="loading" class="hidden">
            <img src="./images/loading-image.gif" id="loading-image">
        </div>
        <div id="full-slider-wrapper">
            <div id="full-slider" class="hidden">
                <div class="slide-panel active1">
                    <center>
                        <div id="print1"></div>
                    </center>
                    <br>
                </div>
                <div class="slide-panel">
                    <center>
                        <div id="print2"></div>
                    </center>
                    <br>
                </div>
                <div class="slide-panel">
                    <center>
                        <div id="print3"></div>
                    </center>
                    <br>
                </div>
            </div>
        </div>

        <script type="text/javascript">
            $(function() {
                function slidePanel( newPanel, direction ) {
                    // define the offset of the slider obj, vis a vis the document
                    var offsetLeft = $slider.offset().left;
                    // offset required to hide the content off to the left / right
                    var hideLeft = -1 * ( offsetLeft + $slider.width() );
                    var hideRight = $(window).width() - offsetLeft;

                    // change the current / next positions based on the direction of the animation
                    if ( direction == 'left' ) {
                        currPos = hideLeft;
                        nextPos = hideRight;
                    }
                    else {
                        currPos = hideRight;
                        nextPos = hideLeft;
                    }

                    // slide out the current panel, then remove the active class
                    $slider.children('.slide-panel.active1').animate({
                        left: currPos
                    }, 500, function() {
                        $(this).removeClass('active1');
                    });

                    // slide in the next panel after adding the active class
                    $( $sliderPanels[newPanel] ).css('left', nextPos).addClass('active1').animate({
                        left: 0
                    }, 500 );
                }
                var $slider = $('#full-slider');
                var $sliderPanels = $slider.children('.slide-panel');
                var $navWrap = $('<div id="full-slider-nav"></div>').appendTo( $slider );
                var $navLeft = $('<div id="full-slider-nav-left"></div>').appendTo( $navWrap );
                var $navRight = $('<div id="full-slider-nav-right"></div>').appendTo( $navWrap );
                var currPanel = 0;

                $navLeft.click(function() {
                    currPanel--;
                    // check if the new panel value is too small
                    if ( currPanel < 0 ) currPanel = $sliderPanels.length - 1;
                    slidePanel(currPanel, 'right');
                });

                $navRight.click(function() {
                    currPanel++;
                    // check if the new panel value is too big
                    if (currPanel >= $sliderPanels.length) currPanel = 0;
                    slidePanel(currPanel, 'left');
                });
            });
        </script>
        <button class="goto" target="3">평가하기</button>
    </div>

    <div class="content" id="content3">
        <button class="goto" target="1">처음으로</button>
        <div class="boxing">
            <h2 style="font-size:30px; color:white;">평가&리뷰</h2>
            <span class="star-input">
                <span class="input">
                    <input type="radio" name="star-input" value="1" id="p1">
                    <label for="p1">1</label>
                    <input type="radio" name="star-input" value="2" id="p2">
                    <label for="p2">2</label>
                    <input type="radio" name="star-input" value="3" id="p3">
                    <label for="p3">3</label>
                    <input type="radio" name="star-input" value="4" id="p4">
                    <label for="p4">4</label>
                    <input type="radio" name="star-input" value="5" id="p5">
                    <label for="p5">5</label>
                </span>
                <output for="star-input" id="star" style="color:white;"><b>0</b>점</output>
            </span>
            <form action="#" accept-charset="utf-8" name="person_info" method="get">
                <fieldset style="width:200px">
                    <legend style="color:white;">리뷰</legend>
                    <textarea name="addText" id="reviewContent" placeholder="리뷰를 입력해주세요" rows="6" cols="70%" ></textarea>
                </fieldset>
            </form>
            <input type="submit" id="review" onclick="sendReview()" value="등록하기">
        </div>
    </div>
    <script src="js/star.js"></script>
    <script src="js/review.js"></script>
    <script type="text/javascript">
        $('#search').click(function () {
            var checked = [];
            var checkedStr = "";
            var i;

            for (i = 0; i < 3; i++) {
                $('#print' + (i+1)).empty();
            }
            $('#full-slider').addClass('hidden');
            $('#loading').removeClass('hidden');

            $("input[name=search]:checked").each(function () {
                checked.push($(this).val());
            });
            if (checked.length !== 0)
                checkedStr = checked.join(',');

            $.ajax({
                url: 'http://localhost:8000/ajax',
                dataType: 'json',
                type: 'POST',
                data: {'msg':checkedStr},
                success: function (result) {
                    console.log(result);
                    showResult(result)
                }
            })
        });
    </script>
    <script type="text/javascript">
        function showResult(result) {
            var str_array = result.msg;
            var i;
            var target;

            $('#loading').addClass('hidden');
            $('#full-slider').removeClass('hidden');
            for (i = 0; i < str_array.length; i++) {
                target = '#print' + (i+1);
                $(target).append('<br />' +'<div id= "Name">' + str_array[i].Name + '</div>' + '<br />');
                $(target).append('<img src="' + str_array[i].Image + '">' + '<br />' + '<br />' + '<br />');
                $(target).append(str_array[i].Function + '<br />');
                $(target).append('<br />' + str_array[i].Details + '<br />');
            }
        }
    </script>
    <script>
        $(function(){
            $(window).scroll(function(){
                var height = $('#content1').height();
                var scroll_y = $(document).scrollTop();
                var current = Math.floor(scroll_y/height) + 1;

                $('.active').removeClass('active');
                $('.goto[target=' + current + ']').addClass('active');
            });

            $('.goto').click(function(){
                var target = $(this).attr('target');
                var scrollTop = $('#content' + target).offset().top;
                $('html, body').stop().animate({scrollTop:scrollTop}, 700, 'swing');
            });
        });
    </script>
</body>
</html>